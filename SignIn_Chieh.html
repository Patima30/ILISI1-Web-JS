<!DOCTYPE html>
<html>
    <head>
        <title>SIGN IN H</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
            <form id="loginfor" role="form" onsubmit="return false;" autocomplete="off"> 
                <fieldset>
                    <legend>SIGN IN</legend>
                <table>
                    <tr>
                        <td><label for="email">Votre email</label></td>
                        <td><input id="email" type="email" placeholder="email" value=""/></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><span id="erreur1"></span><br></td>
                    </tr>
                    <tr>
                        <td><label for="pwd">Votre mot de passe</label></td>
                        <td><input id="pwd" type="password" placeholder="Password" value=""/><br></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><span id="erreur2"></span><br></td>
                    </tr>
                    <tr>
                        <td><button name="bt" id="login" type="submit" value="get Account" class="btn btn-dark">Se connecter </button></td>
                    </tr>
                    <tr>
                        <td colspan="=2"> <label> Creer un compte </label> 
                         <a href="SignUp_Chieh.html">Sign Up</a> </td>  
                        
                    </tr>
                </table>               
                </fieldset>         
           </form>
    </body>
</html>
<script type="text/javascript" >
    
const loginBtn = document.querySelector("#login")

loginBtn.addEventListener("click", signIn)

    function signIn(e) {
    let email = document.getElementById('email');
    pwd = document.getElementById('pwd');
    er1=document.getElementById('erreur1');
    er2=document.getElementById('erreur2');
    er1.innerHTML = "";
    er2.innerHTML = "";
  
    if(email.value.trim() == ""){
        er1.innerHTML = "Le champ email est obligatoire";
        er1.style.color="red";
        e.preventDefault();
    }

    else
    if(pwd.value.trim() == ""){
        er2.innerHTML = "Le champ password est obligatoire";
        er2.style.color="red";
        e.preventDefault();
    }
    else{
        email = email.value,
        pwd =pwd.value;
        pwd2=pwd.hashCode();
        let formData = JSON.parse(localStorage.getItem('formData')) || [];
        let exist = formData.filter(data => data.email == email && data.pwd2 == pwd2);
        console.log(exist);
        if(exist.length){
         alert("Connection avec succees");
        }        
        else{
          alert("l'email ou le mot de passe incorrects");
        }
                       
        email.reset();
        pwd.reset();
        e.preventDefault();

    }
}
String.prototype.hashCode = function() {
    var hash = 0;
    for (var i = 0; i < this.length; i++) {
        var char = this.charCodeAt(i);
         hash = ((hash<<5)-hash)+char;
        hash = hash & hash; // Convert to 32bit integer
    }
     return hash;
 }
</script>